#!/bin/sh
# build client projects generated by java-petstore-client-all.sh 
# run it from swagger-codegen base directory

red=`tput setaf 1`
green=`tput setaf 2`
reset_clr=`tput sgr0`

declare -a projects=( \
 feign \
 google-api-client \
 jersey1 \
 jersey2 \
 jersey2-java6 \
 jersey2-java8 \
 okhttp-gson \
 okhttp-gson-parcelableModel \
 resteasy \
 resttemplate \
 resttemplate-withXml \
 retrofit \
 retrofit2 \
 retrofit2-play24 \
 retrofit2-play25 \
 retrofit2rx \
 retrofit2rx2 \
 vertx \
)

echo Build java petstore client projects..

base_dir=`pwd`

for i in "${projects[@]}"
do
  proj_dir=$base_dir/samples/client/petstore/java/$i
  if [ -d "$proj_dir" ]; then
    cd $proj_dir
       mvn package > ./build.log
    if [ $? = 0 ]; then
      echo "  $i - ${green}SUCCEED${reset_clr}"
    else
      echo "  $i - ${red}FAILED${reset_clr}"
    fi
    mvn clean &>/dev/null
  else 
     echo ${red}project not found:${reset_clr} $proj_dir
  fi
done
